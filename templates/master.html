<DOCTYPE html>
	<html lang='en'>
	<head>

      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

      <script type='text/javascript'>
         function send_message() {
				console.log("Button clicked") //I don't even get this log message!
				var last_answer=$('#input_ID').val()
				var url = "http://localhost:5000/last_answer/" +last_answer
                $('#chat_container').append("<div class='last_answer' >" +last_answer+"</div>");

                $('#chat_container').append("<center> <img src='http://i.stack.imgur.com/SBv4T.gif' title='...' /> </center>"); //displays loading gif for a second

				$.getJSON(url, function(server_response) {
					console.log(server_response['chatbot_response'])
					console.log("Getting response from " +url)
                    var response = server_response['chatbot_response'].replace(/(?:\r\n|\r|\n)/g, '<br>')
                    $("#chat_container img:last-child").remove()
                    $('#chat_container').append("<div class='server_reply'> <font color='white'> "+response +"</div>");
                })
			}	
		</script>

		<meta charset="utf-8" />
		<title>Newslens Chatbot</title>
		<link type="text/css" rel="stylesheet"href="{{ url_for('static',filename='styles/mainpage.css')}}" />
	</head>
<center>
	<form>
		<p><input id="input_ID" type="text" name="input"> </p>
	</form>
  <button onclick="send_message()">Submit</button>  

</center>
  <body>
      <div name = "chat_container" id='chat_container'></div>
  </body>
  </html>

